(window.webpackJsonp=window.webpackJsonp||[]).push([["el.gs"],{525:function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return N});var a=r(0),s=r.n(a),n=r(50),o=r.n(n),c=r(83),i=r.n(c),l=r(144),u=r(45),p=r(38),m=r(149),h=r(61),d=r(40),g=r(59),T=r(78),w=r(54),P=r(55),k=r(56),b=r(60),f=r(57),G=r(554),C=r.n(G);const E=["rgba(255, 0, 0, 0.25)","rgba(0, 128, 255, 0.25)"];class N extends a.PureComponent{constructor(e){super(e),this.onReset=(()=>{this.reset(!1)}),this.onTeamBallPick=(async e=>{const{pots:t,currentPotNum:r}=this.state,a=t[r],s=a.slice(),n=a.splice(e,1)[0];this.setState({hungPot:s,selectedTeam:n,pickedGroup:null,calculating:!0},this.onTeamSelect)}),this.onTeamSelect=(async()=>{this.setLongCalculating();const{pots:e,groups:t,selectedTeam:r,currentPotNum:a}=this.state;if(!r)throw new Error("no selected team");const s=await this.getPickedGroup();if(void 0===s)return void this.setState({error:"Could not determine the group"});t[s].push(r);const n=e[a].length>0?a:a+1,o=n>=e.length;o&&this.workerWrapper.terminate(),this.state.airborneTeams.push(r);const c=this.animateCell(r,s);this.setState({groups:t,selectedTeam:null,pickedGroup:s,hungPot:e[n],currentPotNum:n,calculating:!1,longCalculating:!1,completed:o,airborneTeams:this.state.airborneTeams},async()=>{await c,this.setState({airborneTeams:this.state.airborneTeams.filter(e=>e!==r)})})}),this.reset(!0)}componentWillUnmount(){this.workerWrapper&&this.workerWrapper.terminate()}reset(e){this.workerWrapper&&this.workerWrapper.terminate();const t=new C.a;this.workerWrapper=new m.a(t,12e4);const r=this.props.pots,a=r.map(e=>u(e)),s=a[0],n={drawId:p("draw-"),initialPots:r,pots:a,groups:s.map(e=>[]),maxTeamsInGroup:a.length,airborneTeams:[],currentPotNum:0,selectedTeam:null,pickedGroup:null,hungPot:s,calculating:!1,longCalculating:!1,completed:!1,error:null};e?this.state=n:this.setState(n)}async getPickedGroup(){try{const{pots:e,groups:t,selectedTeam:r,currentPotNum:a}=this.state,{pickedGroup:s}=await this.workerWrapper.sendAndReceive({pots:e,groups:t,selectedTeam:r,currentPotNum:a});return s}catch(e){console.error(e)}}async setLongCalculating(){const e=l(this.state,"airborneTeams");await o()(3e3);const t=l(this.state,"airborneTeams");i()(t,e)&&this.setState({longCalculating:!0})}animateCell(e,t){const{currentPotNum:r}=this.state;if(!e)return;const a=document.querySelector(`[data-cellid='${e.id}']`),s=`[data-cellid='${Object(d.a)(t)}${r}']`,n=document.querySelector(s);return a instanceof HTMLElement&&n instanceof HTMLElement?Object(h.a)(a,n,350):void 0}render(){const{initialPots:e,pots:t,groups:r,maxTeamsInGroup:a,currentPotNum:n,hungPot:o,airborneTeams:c,selectedTeam:i,pickedGroup:l,calculating:u,longCalculating:p,completed:m}=this.state;return s.a.createElement(f.a,null,s.a.createElement(w.a,null,s.a.createElement(g.a,{selectedTeams:i&&[i],initialPots:e,pots:t,currentPotNum:n}),s.a.createElement(T.a,{maxTeams:a,currentPotNum:n,groups:r,possibleGroups:null,airborneTeams:c,groupColors:E})),s.a.createElement(P.a,null,s.a.createElement(k.a,{calculating:u,completed:m,selectedTeam:i,pot:o,onPick:this.onTeamBallPick}),s.a.createElement(b.a,{long:!0,calculating:p,completed:m,selectedTeam:i,pickedGroup:l,possibleGroups:null,numGroups:r.length,reset:this.onReset})))}}},554:function(e,t,r){e.exports=function(){return new Worker(r.p+"258b99fcf9b788cc2b0e.worker.js")}}}]);